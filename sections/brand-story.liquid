{% comment %}
  Brand Story Section — Rapha-inspired editorial design
  Split layout with large image + text content
  60% image / 40% text on desktop, stacked on mobile
{% endcomment %}

<section
  class="py-12 md:py-24 {% if section.settings.background_style == 'surface' %}bg-surface{% elsif section.settings.background_style == 'warm' %}bg-[#E8E6E1]{% else %}bg-white{% endif %}"
  aria-labelledby="BrandStory-{{ section.id }}"
>
  <div class="max-w-7xl mx-auto px-4 md:px-8">
    <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 md:gap-12 lg:gap-16 items-center {% if section.settings.layout == 'text_first' %}lg:flex-row-reverse{% endif %}">

      {%- comment -%} Image Column (60% = 3/5 on desktop) {%- endcomment -%}
      <div class="{% if section.settings.layout == 'text_first' %}lg:order-2{% endif %} lg:col-span-3">
        <div class="relative overflow-hidden {% if section.settings.image_style == 'rounded' %}rounded-lg{% endif %}">
          {%- if section.settings.image != blank -%}
            <img
              src="{{ section.settings.image | image_url: width: 1400 }}"
              srcset="
                {{ section.settings.image | image_url: width: 600 }} 600w,
                {{ section.settings.image | image_url: width: 900 }} 900w,
                {{ section.settings.image | image_url: width: 1400 }} 1400w
              "
              sizes="(max-width: 1024px) 100vw, 60vw"
              alt="{{ section.settings.image.alt | default: section.settings.heading | escape }}"
              loading="lazy"
              width="{{ section.settings.image.width }}"
              height="{{ section.settings.image.height }}"
              class="w-full h-auto object-cover"
            >
          {%- else -%}
            {%- comment -%} Placeholder {%- endcomment -%}
            <div class="aspect-[4/3] bg-[#E8E6E1] flex items-center justify-center">
              <svg class="w-24 h-24 text-[#9B9B9B]" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
              </svg>
            </div>
          {%- endif -%}
        </div>
      </div>

      {%- comment -%} Text Column (40% = 2/5 on desktop) {%- endcomment -%}
      <div class="{% if section.settings.layout == 'text_first' %}lg:order-1{% endif %} lg:col-span-2">
        <div class="max-w-lg {% if section.settings.layout == 'text_first' %}lg:ml-auto{% endif %}">
          {%- comment -%} Overline / Eyebrow {%- endcomment -%}
          {%- if section.settings.overline != blank -%}
            <p class="text-[11px] uppercase tracking-[0.15em] font-medium text-[#6B6B6B] mb-4">
              {{ section.settings.overline }}
            </p>
          {%- endif -%}

          {%- comment -%} Heading — Serif display font {%- endcomment -%}
          {%- if section.settings.heading != blank -%}
            <h2
              id="BrandStory-{{ section.id }}"
              class="font-display text-3xl md:text-4xl lg:text-[42px] text-[#1A1A1A] leading-tight mb-6"
            >
              {{ section.settings.heading }}
            </h2>
          {%- endif -%}

          {%- comment -%} Body Text — Sans-serif {%- endcomment -%}
          {%- if section.settings.body_text != blank -%}
            <div class="font-body text-base md:text-lg text-[#6B6B6B] leading-relaxed space-y-4 mb-8">
              {{ section.settings.body_text }}
            </div>
          {%- endif -%}

          {%- comment -%} Optional CTA Button {%- endcomment -%}
          {%- if section.settings.button_text != blank -%}
            <a
              href="{{ section.settings.button_url | default: pages['about'].url | default: '#' }}"
              class="{% if section.settings.button_style == 'primary' %}inline-block bg-[#0A0A0A] text-white uppercase tracking-[0.15em] text-[13px] font-medium px-8 py-4 hover:bg-[#333] transition-colors{% else %}inline-block border border-[#0A0A0A] text-[#0A0A0A] uppercase tracking-[0.15em] text-[13px] font-medium px-8 py-4 hover:bg-[#0A0A0A] hover:text-white transition-colors{% endif %}"
            >
              {{ section.settings.button_text }}
            </a>
          {%- endif -%}

          {%- comment -%} Optional Text Link (alternative to button) {%- endcomment -%}
          {%- if section.settings.link_text != blank and section.settings.button_text == blank -%}
            <a
              href="{{ section.settings.link_url | default: pages['about'].url | default: '#' }}"
              class="inline-flex items-center text-[13px] uppercase tracking-[0.1em] text-[#0A0A0A] underline underline-offset-4 hover:opacity-70 transition-opacity"
            >
              {{ section.settings.link_text }}
              <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
              </svg>
            </a>
          {%- endif -%}
        </div>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Brand Story",
  "tag": "section",
  "class": "brand-story-section",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout",
      "default": "image_first",
      "options": [
        { "value": "image_first", "label": "Image Left" },
        { "value": "text_first", "label": "Image Right" }
      ]
    },
    {
      "type": "select",
      "id": "background_style",
      "label": "Background",
      "default": "white",
      "options": [
        { "value": "white", "label": "White" },
        { "value": "surface", "label": "Off-White" },
        { "value": "warm", "label": "Warm Gray" }
      ]
    },
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "select",
      "id": "image_style",
      "label": "Image Style",
      "default": "square",
      "options": [
        { "value": "square", "label": "Square Corners" },
        { "value": "rounded", "label": "Rounded Corners" }
      ]
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "overline",
      "label": "Overline",
      "default": "Our Story"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Precision Equipment for Modern Laboratories"
    },
    {
      "type": "richtext",
      "id": "body_text",
      "label": "Body Text",
      "default": "<p>Founded by scientists, built for researchers. We believe laboratory equipment should be as reliable as the science it enables. Every product in our collection is tested, certified, and backed by our commitment to quality.</p><p>From clinical labs to educational institutions, we supply the tools that make discovery possible.</p>"
    },
    {
      "type": "header",
      "content": "Call to Action"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Learn More"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button Style",
      "default": "primary",
      "options": [
        { "value": "primary", "label": "Solid (Primary)" },
        { "value": "secondary", "label": "Outline (Secondary)" }
      ]
    },
    {
      "type": "header",
      "content": "Alternative: Text Link"
    },
    {
      "type": "paragraph",
      "content": "Use this instead of a button for a lighter touch"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Link Text"
    },
    {
      "type": "url",
      "id": "link_url",
      "label": "Link URL"
    }
  ],
  "presets": [
    {
      "name": "Brand Story"
    }
  ],
  "disabled_on": {
    "groups": ["header", "footer"]
  }
}
{% endschema %}
