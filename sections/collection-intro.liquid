{{ 'section-rich-text.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .collection-intro-{{ section.id }} {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }
  @media screen and (min-width: 750px) {
    .collection-intro-{{ section.id }} {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
  .collection-intro-{{ section.id }} .collection-intro__highlights {
    margin: 1.5rem 0 0;
    padding: 0;
    list-style: none;
    display: grid;
    gap: 0.75rem;
  }
  .collection-intro-{{ section.id }} .collection-intro__highlights li {
    padding: 0.75rem 1rem;
    border-radius: 0.75rem;
    background: rgba(0, 0, 0, 0.03);
  }
{%- endstyle -%}

<section class="collection-intro-{{ section.id }} color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width page-width--narrow">
    {%- liquid
      assign intro = section.settings.intro
      if intro == blank
        assign intro = collection.description
      endif
    -%}
    {%- if section.settings.kicker != blank -%}
      <p class="caption-with-letter-spacing">{{ section.settings.kicker }}</p>
    {%- endif -%}
    <h2 class="{{ section.settings.heading_size }}">{{ section.settings.heading | default: collection.title }}</h2>
    {%- if intro != blank -%}
      <div class="rte">{{ intro }}</div>
    {%- endif -%}
    {%- if section.settings.highlights != blank -%}
      <ul class="collection-intro__highlights">
        {%- assign highlights = section.settings.highlights | newline_to_br | split: '<br />' -%}
        {%- for item in highlights -%}
          {%- if item != blank -%}
            <li>{{ item }}</li>
          {%- endif -%}
        {%- endfor -%}
      </ul>
    {%- endif -%}
    {%- if section.settings.cta_label != blank and section.settings.cta_link != blank -%}
      <div class="collection-intro__cta">
        <a class="button" href="{{ section.settings.cta_link }}">{{ section.settings.cta_label }}</a>
      </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Collection intro",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "kicker",
      "label": "Kicker",
      "default": "Built for busy labs"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Find the right model"
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading size",
      "default": "h2",
      "options": [
        { "value": "h1", "label": "Large" },
        { "value": "h2", "label": "Medium" },
        { "value": "h3", "label": "Small" }
      ]
    },
    {
      "type": "richtext",
      "id": "intro",
      "label": "Intro copy"
    },
    {
      "type": "textarea",
      "id": "highlights",
      "label": "Highlights (one per line)",
      "default": "Fast shipping\nStraightforward specs\nBuilt for daily use"
    },
    {
      "type": "text",
      "id": "cta_label",
      "label": "CTA label",
      "default": "Compare models"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA link"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 32
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 32
    }
  ],
  "presets": [
    {
      "name": "Collection intro"
    }
  ]
}
{% endschema %}
